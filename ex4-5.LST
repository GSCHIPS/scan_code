C51 COMPILER V7.02a   EX4_5                                                                05/24/2008 10:08:40 PAGE 1   


C51 COMPILER V7.02a, COMPILATION OF MODULE EX4_5
OBJECT MODULE PLACED IN ex4-5.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ex4-5.C BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          
   2          #include <REGX51.H>
   3          
   4          static int wide[19];
   5          static char wi[19];
   6          static int x=0,y=0;
   7          static char a[2],b[2],c[2];
   8          static char n=0;
   9          static char TT0=0,TT1=0,ZZ0=0,ZZ1=0;
  10          
  11          void delay (void)  {          
  12   1        unsigned char i,j;         
  13   1           for (i=0;i<255;i++)
  14   1                for(j=0;j<255;j++)
  15   1                ;
  16   1      }
  17          /*void delay1 (void)  {          
  18            unsigned char i,j;         
  19               for (i=0;i<100;i++)
  20                    for(j=0;j<2;j++)
  21                    ;
  22          }*/
  23          
  24          static void xint0_isr(void) interrupt IE0_VECTOR
  25          { 
  26   1      ZZ0=1;ZZ1=0;
  27   1        }
  28          static void xint1_isr(void) interrupt IE1_VECTOR
  29          {
  30   1      ZZ1=1;ZZ0=0;
  31   1      }
  32          
  33          void luoji(void){
  34   1         unsigned char m;
  35   1          wi[2]=0;
  36   1          for(m=2;m<19;m++)
  37   1          { 
  38   2            if(wide[m+1]>2*wide[m])
  39   2                wi[m+1]=1;
  40   2                 else if(2*wide[m+1]<wide[m])
  41   2                     wi[m+1]=0;
  42   2                      else wi[m+1]=wi[m];
  43   2           }
  44   1      }
  45          
  46          void yuedu(void){
  47   1      
  48   1            {
  49   2                 if((wi[4]==0)&&(wi[6]==0)&&(wi[8]==1)&&(wi[10]==1)&&(wi[12]==0)) a[0]=0;
  50   2                         else if((wi[4]==1)&&(wi[6]==0)&&(wi[8]==0)&&(wi[10]==0)&&(wi[12]==1))a[0]=1;
  51   2                         else if((wi[4]==0)&&(wi[6]==1)&&(wi[8]==0)&&(wi[10]==0)&&(wi[12]==1))a[0]=2;
  52   2                         else if((wi[4]==1)&&(wi[6]==1)&&(wi[8]==0)&&(wi[10]==0)&&(wi[12]==0))a[0]=3;
  53   2                         else if((wi[4]==0)&&(wi[6]==0)&&(wi[8]==1)&&(wi[10]==0)&&(wi[12]==1))a[0]=4;
  54   2                         else if((wi[4]==1)&&(wi[6]==0)&&(wi[8]==1)&&(wi[10]==0)&&(wi[12]==0))a[0]=5;
  55   2                         else if((wi[4]==0)&&(wi[6]==1)&&(wi[8]==1)&&(wi[10]==0)&&(wi[12]==0))a[0]=6;
C51 COMPILER V7.02a   EX4_5                                                                05/24/2008 10:08:40 PAGE 2   

  56   2                         else if((wi[4]==0)&&(wi[6]==0)&&(wi[8]==0)&&(wi[10]==1)&&(wi[12]==1))a[0]=7;
  57   2                         else if((wi[4]==1)&&(wi[6]==0)&&(wi[8]==0)&&(wi[10]==1)&&(wi[12]==0))a[0]=8;
  58   2                         else if((wi[4]==0)&&(wi[6]==1)&&(wi[8]==0)&&(wi[10]==1)&&(wi[12]==0))a[0]=9;
  59   2                       }
  60   1                 
  61   1      
  62   1                       {
  63   2                  if((wi[5]==0)&&(wi[7]==0)&&(wi[9]==1)&&(wi[11]==1)&&(wi[13]==0)) a[1]=0;
  64   2                         else if((wi[5]==1)&&(wi[7]==0)&&(wi[9]==0)&&(wi[11]==0)&&(wi[13]==1)) a[1]=1;
  65   2                         else if((wi[5]==0)&&(wi[7]==1)&&(wi[9]==0)&&(wi[11]==0)&&(wi[13]==1)) a[1]=2;
  66   2                         else if((wi[5]==1)&&(wi[7]==1)&&(wi[9]==0)&&(wi[11]==0)&&(wi[13]==0)) a[1]=3;
  67   2                         else if((wi[5]==0)&&(wi[7]==0)&&(wi[9]==1)&&(wi[11]==0)&&(wi[13]==1)) a[1]=4;
  68   2                         else if((wi[5]==1)&&(wi[7]==0)&&(wi[9]==1)&&(wi[11]==0)&&(wi[13]==0)) a[1]=5;
  69   2                         else if((wi[5]==0)&&(wi[7]==1)&&(wi[9]==1)&&(wi[11]==0)&&(wi[13]==0)) a[1]=6;
  70   2                         else if((wi[5]==0)&&(wi[7]==0)&&(wi[9]==0)&&(wi[11]==1)&&(wi[13]==1)) a[1]=7;
  71   2                         else if((wi[5]==1)&&(wi[7]==0)&&(wi[9]==0)&&(wi[11]==1)&&(wi[13]==0)) a[1]=8;
  72   2                         else if((wi[5]==0)&&(wi[7]==1)&&(wi[9]==0)&&(wi[11]==1)&&(wi[13]==0)) a[1]=9;
  73   2                      }
  74   1      
  75   1              {
  76   2                  if((wi[6]==0)&&(wi[8]==0)&&(wi[10]==1)&&(wi[12]==1)&&(wi[14]==0)) b[0]=0;
  77   2                         else if((wi[6]==1)&&(wi[8]==0)&&(wi[10]==0)&&(wi[12]==0)&&(wi[14]==1))b[0]=1;
  78   2                         else if((wi[6]==0)&&(wi[8]==1)&&(wi[10]==0)&&(wi[12]==0)&&(wi[14]==1))b[0]=2;
  79   2                         else if((wi[6]==1)&&(wi[8]==1)&&(wi[10]==0)&&(wi[12]==0)&&(wi[14]==0))b[0]=3;
  80   2                         else if((wi[6]==0)&&(wi[8]==0)&&(wi[10]==1)&&(wi[12]==0)&&(wi[14]==1))b[0]=4;
  81   2                         else if((wi[6]==1)&&(wi[8]==0)&&(wi[10]==1)&&(wi[12]==0)&&(wi[14]==0))b[0]=5;
  82   2                         else if((wi[6]==0)&&(wi[8]==1)&&(wi[10]==1)&&(wi[12]==0)&&(wi[14]==0))b[0]=6;
  83   2                         else if((wi[6]==0)&&(wi[8]==0)&&(wi[10]==0)&&(wi[12]==1)&&(wi[14]==1))b[0]=7;
  84   2                         else if((wi[6]==1)&&(wi[8]==0)&&(wi[10]==0)&&(wi[12]==1)&&(wi[14]==0))b[0]=8;
  85   2                         else if((wi[6]==0)&&(wi[8]==1)&&(wi[10]==0)&&(wi[12]==1)&&(wi[14]==0))b[0]=9;
  86   2                       }
  87   1                 
  88   1      
  89   1                         {
  90   2                  if((wi[7]==0)&&(wi[9]==0)&&(wi[11]==1)&&(wi[13]==1)&&(wi[15]==0)) b[1]=0;
  91   2                         else if((wi[7]==1)&&(wi[9]==0)&&(wi[11]==0)&&(wi[13]==0)&&(wi[15]==1)) b[1]=1;
  92   2                         else if((wi[7]==0)&&(wi[9]==1)&&(wi[11]==0)&&(wi[13]==0)&&(wi[15]==1)) b[1]=2;
  93   2                         else if((wi[7]==1)&&(wi[9]==1)&&(wi[11]==0)&&(wi[13]==0)&&(wi[15]==0)) b[1]=3;
  94   2                         else if((wi[7]==0)&&(wi[9]==0)&&(wi[11]==1)&&(wi[13]==0)&&(wi[15]==1)) b[1]=4;
  95   2                         else if((wi[7]==1)&&(wi[9]==0)&&(wi[11]==1)&&(wi[13]==0)&&(wi[15]==0)) b[1]=5;
  96   2                         else if((wi[7]==0)&&(wi[9]==1)&&(wi[11]==1)&&(wi[13]==0)&&(wi[15]==0)) b[1]=6;
  97   2                         else if((wi[7]==0)&&(wi[9]==0)&&(wi[11]==0)&&(wi[13]==1)&&(wi[15]==1)) b[1]=7;
  98   2                         else if((wi[7]==1)&&(wi[9]==0)&&(wi[11]==0)&&(wi[13]==1)&&(wi[15]==0)) b[1]=8;
  99   2                         else if((wi[7]==0)&&(wi[9]==1)&&(wi[11]==0)&&(wi[13]==1)&&(wi[15]==0)) b[1]=9;
 100   2                      }
 101   1               {
 102   2                if((wi[8]==0)&&(wi[10]==0)&&(wi[12]==1)&&(wi[14]==1)&&(wi[16]==0)) c[0]=0;
 103   2                         else if((wi[8]==1)&&(wi[10]==0)&&(wi[12]==0)&&(wi[14]==0)&&(wi[16]==1))c[0]=1;
 104   2                         else if((wi[8]==0)&&(wi[10]==1)&&(wi[12]==0)&&(wi[14]==0)&&(wi[16]==1))c[0]=2;
 105   2                         else if((wi[8]==1)&&(wi[10]==1)&&(wi[12]==0)&&(wi[14]==0)&&(wi[16]==0))c[0]=3;
 106   2                         else if((wi[8]==0)&&(wi[10]==0)&&(wi[12]==1)&&(wi[14]==0)&&(wi[16]==1))c[0]=4;
 107   2                         else if((wi[8]==1)&&(wi[10]==0)&&(wi[12]==1)&&(wi[14]==0)&&(wi[16]==0))c[0]=5;
 108   2                         else if((wi[8]==0)&&(wi[10]==1)&&(wi[12]==1)&&(wi[14]==0)&&(wi[16]==0))c[0]=6;
 109   2                         else if((wi[8]==0)&&(wi[10]==0)&&(wi[12]==0)&&(wi[14]==1)&&(wi[16]==1))c[0]=7;
 110   2                         else if((wi[8]==1)&&(wi[10]==0)&&(wi[12]==0)&&(wi[14]==1)&&(wi[16]==0))c[0]=8;
 111   2                         else if((wi[8]==0)&&(wi[10]==1)&&(wi[12]==0)&&(wi[14]==1)&&(wi[16]==0))c[0]=9;
 112   2                       }
 113   1                 
 114   1      
 115   1                         {
 116   2                  if((wi[9]==0)&&(wi[11]==0)&&(wi[13]==1)&&(wi[15]==1)&&(wi[17]==0)) c[1]=0;
 117   2                         else if((wi[9]==1)&&(wi[11]==0)&&(wi[13]==0)&&(wi[15]==0)&&(wi[17]==1)) c[1]=1;
C51 COMPILER V7.02a   EX4_5                                                                05/24/2008 10:08:40 PAGE 3   

 118   2                         else if((wi[9]==0)&&(wi[11]==1)&&(wi[13]==0)&&(wi[15]==0)&&(wi[17]==1)) c[1]=2;
 119   2                         else if((wi[9]==1)&&(wi[11]==1)&&(wi[13]==0)&&(wi[15]==0)&&(wi[17]==0)) c[1]=3;
 120   2                         else if((wi[9]==0)&&(wi[11]==0)&&(wi[13]==1)&&(wi[15]==0)&&(wi[17]==1)) c[1]=4;
 121   2                         else if((wi[9]==1)&&(wi[11]==0)&&(wi[13]==1)&&(wi[15]==0)&&(wi[17]==0)) c[1]=5;
 122   2                         else if((wi[9]==0)&&(wi[11]==1)&&(wi[13]==1)&&(wi[15]==0)&&(wi[17]==0)) c[1]=6;
 123   2                         else if((wi[9]==0)&&(wi[11]==0)&&(wi[13]==0)&&(wi[15]==1)&&(wi[17]==1)) c[1]=7;
 124   2                         else if((wi[9]==1)&&(wi[11]==0)&&(wi[13]==0)&&(wi[15]==1)&&(wi[17]==0)) c[1]=8;
 125   2                         else if((wi[9]==0)&&(wi[11]==1)&&(wi[13]==0)&&(wi[15]==1)&&(wi[17]==0)) c[1]=9;
 126   2                      }
 127   1      }
 128          
 129          void send(){
 130   1      unsigned char i;
 131   1      SCON=0x50;
 132   1      TMOD=0x20;
 133   1      PCON=0x80;
 134   1      TH1=0xF3;
 135   1      TL1=0xF3;
 136   1      TR1=1;
 137   1      
 138   1          for(i=0;i<2;i++)
 139   1               {
 140   2                    ACC=a[i];
 141   2                    SBUF=ACC; 
 142   2                    delay();
 143   2               }
 144   1          for(i=0;i<2;i++)
 145   1               {
 146   2                       ACC=b[i];
 147   2                       SBUF=ACC; 
 148   2                       delay();
 149   2               }
 150   1         for(i=0;i<2;i++)
 151   1               {
 152   2                         ACC=c[i];
 153   2                         SBUF=ACC; 
 154   2                             delay();
 155   2               }
 156   1                         n=0;
 157   1      
 158   1      }
 159          
 160          void main(){
 161   1        EA=0;                   
 162   1        EX0=1; EX1=1;              
 163   1        PX0=0; PX1=0;
 164   1        ET0=0;ET1=0;
 165   1        IT0=1;IT1=1;
 166   1        EA=1;                  
 167   1        
 168   1           while(1){
 169   2      
 170   2              if(ZZ0==1&&TT0==0){
 171   3                 p1_0=0;
 172   3                 p1_7=1;
 173   3                 wide[n]=x;
 174   3                 x=0;
 175   3                  n++;
 176   3                  if(n==18)TT0=1;            
 177   3             loop0:
 178   3                  y++;
 179   3                   if(ZZ0==1&&TT0==0)goto loop0;
C51 COMPILER V7.02a   EX4_5                                                                05/24/2008 10:08:40 PAGE 4   

 180   3                                                             }
 181   2                if(ZZ1==1&&TT1==0){
 182   3                p1_0=1;
 183   3                p1_7=0;
 184   3                wide[n]=y;
 185   3                y=0;
 186   3                n++;
 187   3                if(n==18)TT1=1;
 188   3               loop1:
 189   3                x++;
 190   3             if(ZZ1==1&&TT1==0) goto loop1;
 191   3                                                              } 
 192   2        
 193   2        if(n==18){  
 194   3                 EA=0;
 195   3                 p1_0=1;
 196   3                 p1_7=1;
 197   3                 p1_4=0;
 198   3                 luoji();
 199   3                 yuedu();
 200   3                 send();
 201   3                                    }
 202   2      
 203   2                          } 
 204   1      }
 205          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1977    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     72    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
